---
title: "m2_2"
output: 
  bookdown::html_document2:
    code_fold: hide
    includes:
      in_header: header.html
      after_body: assets/foot.html
---

```{r setup, include=FALSE, purl=FALSE, message=FALSE}

knitr::opts_chunk$set(echo = FALSE)
library(knitr)
library(icon)
library(here)
library(flair)

```

<style>
  .title{
    display: none;
  }
</style>

<br>
<br>

:::obj

 **Objectives for this section:**
 
 - understand how to join datasets by shared columns or IDs
 - have a general sense of the variety of join types
 - join some data and save it
 
:::

<br>

## Joining Data

We often need to take several datasets and merge them into a single dataset that we can use for analysis. This "**join**" can at times be tricky, and can be made more so if we aren't exactly sure what data matches up between the two datasets. Sometimes joining data can resemble more of a gridlock than a clean and seamless merge.

<br>

(ref:gridlockWiki) Merging Data? *(source Wikipedia Commons)*

<center>
```{r gridlock, fig.cap="(ref:gridlockWiki)", out.width="60%"}

knitr::include_graphics("https://upload.wikimedia.org/wikipedia/commons/8/82/New_York_City_Gridlock.jpg")

```
</center>
<br>

## **Common Variables**

<br>
The trick that makes this all possible, is having one or more shared pieces of data across the two (or more) datasets. This may be an ID column, or a specific observation or data type. Importantly, these data can actually have different column names, but they should be formatted in the same way across each dataset! 

While this may seem daunting at first, it's not! R has some excellent tools built into the `{dplyr}` package that make joining datasets fairly straightforward.

First let's import some data we can use to join. Here we will build off of the dataset we used in the previous lesson. Let's read in both the `csci_clean` and `sites_clean` datasets. If you recall, we saved these as `.csv`, `.rds`, `.xlsx`, and `.rda`. For now, let's use the `rda` option as it will be fastest.

Challenge: Read in RDA file. Hint, we'll want to use the `csci_sites_clean.rda` file.

<br>

```{r readRDA, echo=TRUE}

load("data/csci_sites_clean.rda")

```


### **Inspect the Data**

Let's quickly take a look at the columns in our datasets and see what looks similar. To do this we can inspect our data with either `head` or `names` or `str`. All will tell us similar information.

(ref:AHmeetdata) *Artwork by @allison_horst*


```{r AHmeetData, echo=FALSE, fig.cap="(ref:AHmeetdata)"}

include_graphics("https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/make-your-own-stats-cartoons/ex_2.png")

```


```{r}
str(csci_clean)
str(sites_clean)
```

<br> 

What do we see? Looks like similar data in the `StationID` column in `sites_clean` and the `StationCode` column in `csci_clean`



```{r}
# join animations with tidyexplain: https://www.garrickadenbuie.com/project/tidyexplain/
# code here: https://github.com/gadenbuie/tidyexplain/tree/master/R
# animations here:
# https://github.com/gadenbuie/tidyexplain/tree/master/images

```

